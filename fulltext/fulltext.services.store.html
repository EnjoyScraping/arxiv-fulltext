
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>fulltext.services.store module &#8212; arXiv Fulltext Extraction Service 0.1 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="fulltext.celery module" href="fulltext.celery.html" />
    <link rel="prev" title="fulltext.services.pdf module" href="fulltext.services.pdf.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-fulltext.services.store">
<span id="fulltext-services-store-module"></span><h1>fulltext.services.store module<a class="headerlink" href="#module-fulltext.services.store" title="Permalink to this headline">¶</a></h1>
<p>Filesystem-based storage for plain text extraction.</p>
<p>There are two supported “buckets” for plain text content (see
<code class="xref py py-const docutils literal notranslate"><span class="pre">domain.SupportedBuckets</span></code>). These map on to two separate directories on
the filesystem.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">arxiv</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">/{volume}/arxiv</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">submission</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">/{volume}/{bucket}</span></code></p></li>
</ul>
<p>Paths for submission extractions are just <code class="docutils literal notranslate"><span class="pre">/{volume}/{bucket}/{identifier}</span></code>.</p>
<p>For announced arXiv e-prints, we have to path formats:</p>
<ul class="simple">
<li><p>Old-style e-print: <code class="docutils literal notranslate"><span class="pre">/{volume}/arxiv/alg-geom/{YY}{MM}/{YY}{MM}{NNN}v{V}</span></code></p></li>
<li><p>New-style e-print: <code class="docutils literal notranslate"><span class="pre">/{volume}/arxiv/{YY}{MM}/{NNNNN}v{V}</span></code></p></li>
</ul>
<p>Where <code class="docutils literal notranslate"><span class="pre">{YY}</span></code> and <code class="docutils literal notranslate"><span class="pre">{MM}</span></code> are the year and month in which the first version
of the e-print was announced. The remaining digits <code class="docutils literal notranslate"><span class="pre">N</span></code> reflect the
announcement order, which should not be taken to imply anything else of
consequence. The digit <code class="docutils literal notranslate"><span class="pre">{V}</span></code> is the numeric version of the e-print.</p>
<div class="section" id="extraction-versions">
<h2>Extraction versions<a class="headerlink" href="#extraction-versions" title="Permalink to this headline">¶</a></h2>
<p>At each identifier path, content is further separated by extractor version
and content format (currently <code class="docutils literal notranslate"><span class="pre">plain</span></code> or <code class="docutils literal notranslate"><span class="pre">psv</span></code>, see
<code class="xref py py-const docutils literal notranslate"><span class="pre">domain.SupportedFormats</span></code>).</p>
<p>So the plain text content for the e-print <code class="docutils literal notranslate"><span class="pre">2003.00012v4</span></code> using the
current extractor version (0.3 at this writing) would live at:
<code class="docutils literal notranslate"><span class="pre">/{volume}/arxiv/2003/00012v4/0.3/plain</span></code>.</p>
</div>
<div class="section" id="metadata">
<h2>Metadata<a class="headerlink" href="#metadata" title="Permalink to this headline">¶</a></h2>
<p>Metadata about an extraction is stored alongside the content in a file named
<code class="docutils literal notranslate"><span class="pre">meta.json</span></code>. This is an UTF-8 encoded JSON document that contains information
about the state of an extraction (see <code class="xref py py-class docutils literal notranslate"><span class="pre">Extraction</span></code>).</p>
<p>For extractions that are generated with this software, the metadata record will
be created at about the time that the extraction is requested by a client or
initiated by the plain text agent (e.g. in response to notifications about new
PDFs). It will be updated if the disposition of the extraction task changes,
e.g. if it fails or succeeeds.</p>
<p>Therefore, a metadata record may exist well before an actual extraction.</p>
<p>For extractions that were <strong>not</strong> generated with this software (i.e. brought
forward from the legacy system), a metadata record <strong>may not</strong> exist. See
comments in code, below.</p>
<dl class="exception">
<dt id="fulltext.services.store.ConfigurationError">
<em class="property">exception </em><code class="descclassname">fulltext.services.store.</code><code class="descname">ConfigurationError</code><a class="reference internal" href="../_modules/fulltext/services/store.html#ConfigurationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fulltext.services.store.ConfigurationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.6/library/exceptions.html#RuntimeError" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">RuntimeError</span></code></a></p>
<p>A config parameter is missing or invalid.</p>
</dd></dl>

<dl class="exception">
<dt id="fulltext.services.store.DoesNotExist">
<em class="property">exception </em><code class="descclassname">fulltext.services.store.</code><code class="descname">DoesNotExist</code><a class="reference internal" href="../_modules/fulltext/services/store.html#DoesNotExist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fulltext.services.store.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.6/library/exceptions.html#RuntimeError" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">RuntimeError</span></code></a></p>
<p>The requested fulltext content does not exist.</p>
</dd></dl>

<dl class="class">
<dt id="fulltext.services.store.Storage">
<em class="property">class </em><code class="descclassname">fulltext.services.store.</code><code class="descname">Storage</code><a class="reference internal" href="../_modules/fulltext/services/store.html#Storage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fulltext.services.store.Storage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.6/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Provides storage integration.</p>
<dl class="classmethod">
<dt id="fulltext.services.store.Storage.create_session">
<em class="property">classmethod </em><code class="descname">create_session</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fulltext/services/store.html#Storage.create_session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fulltext.services.store.Storage.create_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="#fulltext.services.store.Storage" title="fulltext.services.store.Storage"><code class="xref py py-class docutils literal notranslate"><span class="pre">Storage</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#fulltext.services.store.Storage" title="fulltext.services.store.Storage"><code class="xref py py-class docutils literal notranslate"><span class="pre">Storage</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="classmethod">
<dt id="fulltext.services.store.Storage.current_session">
<em class="property">classmethod </em><code class="descname">current_session</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fulltext/services/store.html#Storage.current_session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fulltext.services.store.Storage.current_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current <a class="reference internal" href="#fulltext.services.store.Storage" title="fulltext.services.store.Storage"><code class="xref py py-class docutils literal notranslate"><span class="pre">Storage</span></code></a> instance for this application.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#fulltext.services.store.Storage" title="fulltext.services.store.Storage"><code class="xref py py-class docutils literal notranslate"><span class="pre">Storage</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="classmethod">
<dt id="fulltext.services.store.Storage.init_app">
<em class="property">classmethod </em><code class="descname">init_app</code><span class="sig-paren">(</span><em>app</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fulltext/services/store.html#Storage.init_app"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fulltext.services.store.Storage.init_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Set defaults for required configuration parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="fulltext.services.store.Storage.is_available">
<code class="descname">is_available</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fulltext/services/store.html#Storage.is_available"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fulltext.services.store.Storage.is_available" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether storage is available.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.6/library/functions.html#bool" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="staticmethod">
<dt id="fulltext.services.store.Storage.make_paths">
<em class="property">static </em><code class="descname">make_paths</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fulltext/services/store.html#Storage.make_paths"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fulltext.services.store.Storage.make_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Create any missing directories containing terminal <code class="docutils literal notranslate"><span class="pre">path</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="fulltext.services.store.Storage.retrieve">
<code class="descname">retrieve</code><span class="sig-paren">(</span><em>version=None</em>, <em>content_fmt='plain'</em>, <em>bucket='arxiv'</em>, <em>meta_only=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fulltext/services/store.html#Storage.retrieve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fulltext.services.store.Storage.retrieve" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve an <a class="reference internal" href="fulltext.domain.html#fulltext.domain.Extraction" title="fulltext.domain.Extraction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Extraction</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="fulltext.domain.html#fulltext.domain.Extraction" title="fulltext.domain.Extraction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Extraction</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="fulltext.services.store.Storage.store">
<code class="descname">store</code><span class="sig-paren">(</span><em>content_fmt=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fulltext/services/store.html#Storage.store"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fulltext.services.store.Storage.store" title="Permalink to this definition">¶</a></dt>
<dd><p>Store an <a class="reference internal" href="fulltext.domain.html#fulltext.domain.Extraction" title="fulltext.domain.Extraction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Extraction</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="fulltext.services.store.StorageFailed">
<em class="property">exception </em><code class="descclassname">fulltext.services.store.</code><code class="descname">StorageFailed</code><a class="reference internal" href="../_modules/fulltext/services/store.html#StorageFailed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fulltext.services.store.StorageFailed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.6/library/exceptions.html#RuntimeError" title="(in Python v3.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">RuntimeError</span></code></a></p>
<p>Could not store content.</p>
</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">arXiv Fulltext Extraction Service</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="fulltext.html">fulltext package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="fulltext.html#subpackages">Subpackages</a></li>
<li class="toctree-l2"><a class="reference internal" href="fulltext.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="fulltext.html">fulltext package</a><ul>
  <li><a href="fulltext.services.html">fulltext.services package</a><ul>
      <li>Previous: <a href="fulltext.services.pdf.html" title="previous chapter">fulltext.services.pdf module</a></li>
      <li>Next: <a href="fulltext.celery.html" title="next chapter">fulltext.celery module</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, arXiv.org.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/fulltext/fulltext.services.store.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>